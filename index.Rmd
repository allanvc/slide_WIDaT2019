---
title: "<code><font color=#4C5455>Ci√™ncia de Dados no Setor P√∫blico:</code>"
subtitle: "<code>cases de sucesso no <font color=#F8A53A>Fundo Nacional de Desenvolvimento da Educa√ß√£o</font></code>"
author: "Allan V. C. Quadros"
date: "Estat√≠stico </br> 27 de novembro, 2019"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: ["./css/middlebury.css", "./css/middlebury-fonts.css"]
    nature:
      beforeInit: ["./js/midd_xaringan.js"]
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
    includes:
      in_header: "./libs/partials/header.html"
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

layout: true
background-image: url(./img/logo/fnde_blue.jpg)
background-position: 0% 100%
background-size: 5%

---

background-image: url(./img/dollar1.jpg)
background-size: 80%
background-position: 50% 50%


---

class: inverse, center, middle
<!-- title-slide-section-grey,  -->

## "In God we trust. All other must bring data."
<p style="text-align:right">W. Edwards Deming</p>

---

class: inverse, center, middle
<!-- title-slide-section-grey,  -->

## <code><font color =#F8A53A>Ci√™ncia </font><font color =#76DFEC>de </font><font color =#C2DB70>Dados</font><font color =#4C5455> no mundo hoje...</font></code>


---

.pull-left[

### Data Science no mundo ...

![](./img/tesla.png)

]

.pull-right[

</br>
</br>
![](./img/galaxies2.jpg)


]


---

.pull-left[

### Data Science no mundo ...

![](./img/ML_med.png)

]

.pull-right[

</br>
</br>
![](./img/jurimetria.png)


]


---

.pull-left[

### Data Science no mundo ...

![](./img/facial_rec2.jpg)

![](./img/credit_card_fraud.jpg)

]

.pull-right[

</br>
</br>
![](./img/bayes_babies.png)


]


---

class: inverse, center, middle
<!-- title-slide-section-grey,  -->

## <code><font color =#F8A53A>O que √© </font><font color =#76DFEC>Data </font><font color =#C2DB70>Science</font><font color =#4C5455>?</font></code>


---


## <font color =#76DFEC>Data </font><font color =#C2DB70>Science</font>

</br>
</br>

### <code>√â um campo **multidisciplinar** que utiliza m√©todos cient√≠ficos, processos, <font color =#F8A53A>algoritmos</font> e sistemas para extrair conhecimento e insights tanto de <font color =#F8A53A>dados estruturados</font> quanto de <font color =#F8A53A>n√£o-estruturados</font>.</code>

<!-- #76DFEC - azul claro -->
	<!-- #F35A94 - rosa -->
	<!-- #F8A53A - laranja -->
	<!-- #C2DB70 - verde -->
	<!-- #4C5455 - cinza -->


---

background-image: url(./img/ds_skillset2.jpg)
background-size: 95%
background-position: 50% 50%


</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>
</br>

#### Fonte: fusionanalytics.com

---

class: inverse, center, middle
<!-- title-slide-section-grey,  -->

# <font color =#76DFEC>o <font><font color =#F8A53A>FNDE<font>


---

class: inverse, center, middle
<!-- title-slide-section-grey,  -->

# <code><font color =#C2DB70>$$$</font></code>

```{r, echo=FALSE, warning=FALSE, cache=FALSE, results='asis'}
cat('<iframe src="./img/plotly_orcamento.html" width="90%" height="50%" scrolling="no" seamless="seamless" frameBorder="1"> </iframe>')
```

---

## <font color =#C2DB70>Programas<font>
</br>
</br>
</br>

<img src="./img/programas_fnde.PNG" style="float: left; width: 40%; margin-right: 1%; margin-bottom: 0.5em;">
  
<img src="./img/fies_logo.jpg" style="float: center; width: 15%; margin-right: 1%; margin-bottom: 0.5em;">
<img src="./img/saleduc_logo.jpg" style="float: center; width: 15%; margin-right: 1%; margin-bottom: 0.5em;">
<img src="./img/fundeb_logo.png" style="float: center; width: 15%; margin-right: 1%; margin-bottom: 0.5em;">

---

class: inverse, center, middle
<!-- title-slide-section-grey,  -->

## <code><font color =#76DFEC>Como </font><font color =#C2DB70>o </font><font color =#F8A53A>FNDE </font><font color =#C2DB70>lida(va) com esse imenso volume de dados</font><font color =#4C5455>?</font></code>


---

class: inverse, center, middle


<img src="./img/excel_logo.jpg" style="float: center; width: 40%; margin-right: 1%; margin-bottom: 0.5em;">


---


<img src="./img/basic_arithmetic.png" style="float: center; width: 50%; margin-right: 1%; margin-bottom: 0.5em;">


---

</br>
</br>
</br>

<img src="./img/summation.png" style="float: left; width: 25%; margin-right: 1%; margin-bottom: 0.5em;">


---

</br>

<img src="./img/mu.png" style="float: left; width: 40%; margin-right: 1%; margin-bottom: 0.5em;">

---

class: center, middle
# <font color =#F8A53A>Resumo do problema</font>

.pull-left[

<code>

- imensa quantidade de dados

- dados extramente sens√≠veis (financeiros, estrat√©gicos)

</code>

]

--

.pull-right[

<code>
**an√°lise de dados pouco profissional:**

- proje√ß√µes equivocadas;
- indicadores in√≥cuos/imprecisos;
- controles falhos;
- retrabalho;
- desperd√≠cio de tempo;>
- desperd√≠cio de <font color =#C2DB70>$$$$</font>

</code>

]


---

class: inverse, center, middle

## <code><font color =#76DFEC>O qu√™ </font><font color =#C2DB70>o </font><font color =#F8A53A>FNDE </font><font color =#C2DB70>tem feito</font><font color =#4C5455>?</font></code>


---

class: center, middle
# <font color =#F8A53A>O projeto pioneiro...</font>


---

# <font color =#F8A53A>FisFa - Fiscaliza Fatura</font>
### **Aplicativo para fiscaliza√ß√£o das faturas dos Agentes Financeiros do FIES**  

.pull-left[
<code> 
### **Contextualiza√ß√£o:**

- FNDE possui 3 contratos: 2 com CEF e 1 com BB

**mensalmente, por banco, recebe-se:**

- fatura do servi√ßo de administra√ß√£o da carteira de financiamento

- base com dados dos alunos financiados (~ 1,7 milh√£o de linhas cada)

</code>

]


.pull-right[
<code> 

**Valores:**  

- mensal: ~ R$ 40 milh√µes cada

- anual: ~ 1 bilh√£o de reais

**Implica√ß√µes:**

- responsabiliza√ß√£o do fiscal de contratos

- responsabiliza√ß√£o dos gestores

- impossibilidade de identificar irregularidades nas bases de dados e na cobran√ßa

</code>
]


---


<code> 
## **Cen√°rio pr√©-FisFa:**

.pull-left[
**fiscaliza√ß√£o das faturas era "pro-forma":**

- n√£o havia base "espelho" do MEC/FNDE para compara√ß√£o

- retirava-se uma amostra (n√£o-aleat√≥ria e min√∫scula) da base enviada pelo banco

- checava-se apenas inconsist√™ncias gritantes

- ex: banco cobrou pelo aluno que ele mesmo informou que j√° havia quitado o financiamento

- todo o processo tomava aproximadamente uma semana

]


.pull-right[
**p√©ssimo clima organizacional:**

- discuss√µes constantes entre fiscais de contratos e os gestores da diretoria

- evas√£o de servidores

**responsabiliza√ß√£o:**

- indaga√ß√µes e apontamentos constantes de TCU e CGU

**tentativas:**

- TI desenvolveria o sistema de "gest√£o da carteira do FIES" üí∏

]

</code>



---

<code> 
## **Concep√ß√£o do FisFa:**

.pull-left[

**experi√™ncia como fiscal de contrato:**

- conhecimento sobre o problema


**conhecimentos do segundo semestre de Estat√≠stica:**

- queria aprimorar a parte de programa√ß√£o em **R**


**independ√™ncia operacional:**

- tinha que ser algo para que outros pudessem operar



]



.pull-right[


**desenho:**

- estruturar a base de dados do FNDE/MEC que serviria como referencial de compara√ß√£o

- aplicativo *point & click*  de Windows desenvolvido totalmente em **R** e com alguns detalhes em _Python_

- simples "cruzador/comparador" de tabelas

- incorporando as regras espec√≠ficas de cada um dos 3 contratos


]

</code>

---

class: inverse, center, middle


<img src="./img/fisfa.PNG" style="float: right; width: 100%; margin-right: 1%; margin-bottom: 0.5em;">


---

<code> 
## **Resultados FisFa:**

.pull-left[

**tempo de an√°lise de uma fatura:**

- passou de uma semana para < 1 minuto

**maior confiabilidade e robustez na an√°lise**

**economia direta:**

- acima de R$200 milh√µes at√© 2018 üí∞

- diversos contratos em situa√ß√£o irregular

**economia indireta:**

- sem contrata√ß√£o de empresa de TI üí∞

- hora/trabalho de servidores üí∞

- identifica√ß√£o de erros na pr√≥pria base do FNDE/MEC

]


.pull-right[

**Pr√™mios:**

<img src="./img/premio_cgu.png" style="float: left; width: 40%; margin-right: 1%; margin-bottom: 0.5em;">

<img src="./img/premio_angc.jpg" style="float: left; width: 65%; margin-right: 1%; margin-bottom: 0.5em;">


]


---

class: center, middle
# <font color =#F8A53A>O principal projeto hoje...</font>


---

# <font color =#C2DB70>Malha-Fina FNDE</font>
### **An√°lise de presta√ß√µes de contas por meio de minera√ß√£o de dados**  

.pull-left[
<code> 
### **Contextualiza√ß√£o:**

- FNDE √© respons√°vel pela descentraliza√ß√£o de recursos de cerca de 33 programas

- s√£o 5.570 munic√≠pios, 27 estados, e entidades como APAES, etc

**obriga√ß√£o de prestar contas:**

- toda descentraliza√ß√£o gera uma obriga√ß√£o de prestar contas por parte do ente/entidade

- a obriga√ß√£o do FNDE √© analisar **TODAS**


</code>

]


.pull-right[
<code> 

**N√∫meros anuais:**  

- entrada: ~ 35.000 presta√ß√µes de contas no SIGPC

- capacidade de an√°lise*: ~ 3.500 presta√ß√µes de contas

- passivo: 290 mil presta√ß√µes de contas

- $$$$: ~ R$90 bilhoes


</code>
]


---


<code> 
### **Contextualiza√ß√£o:**


.pull-left[
**Implica√ß√µes:**

- gestores terminam mandatos sem contas analisadas

- eventuais danos ao er√°rio s√£o identificados tardiamente - n√£o pass√≠veis de recupera√ß√£o üí∏

]

.pull-right[
**tentativas:**

- TI implementaria a "an√°lise autom√°tica de presta√ß√µes de contas"

**problemas:**

- cada programa tem sua normatiza√ß√£o

- todo ano s√£o lan√ßadas portarias novas modificando algum aspecto
]

</code>



---


<code> 
## **Concep√ß√£o do Malha-Fina:**

.pull-left[

**reconhecer que o problema nunca seria resolvido de forma "ideal"**

- CGU sugere ao FNDE utiliza√ß√£o de minera√ß√£o de dados em 2016


**defini√ß√£o de programas-piloto:**

- PNAE, PNATE e PDDE


**contrata√ß√£o de consultores:**

- estudo e estrutura√ß√£o da base de dados

- defini√ß√£o de vari√°veis

- defini√ß√£o e testes dos modelos



]


.pull-right[


**desenho:**

- aprendizagem de m√°quina supervisionada - classifica√ß√£o

- retorna uma probabilidade (nota de risco) de dano ao er√°rio

- algoritmo seria incorporado ao ambiente de produ√ß√£o do SIGPC

**algoritmo escolhido:** 

- XGBoost

]


---


<code> 
## **Resultados Malha-Fina:**

.pull-left[

**Potenciais:**

- elimina√ß√£o do passivo em ~ 5 anos

- economia de mais de R$ 3 bilhoes üí∞

- economia de mais de meio s√©culo de trabalho üí∞

- redu√ß√£o do √≠mpeto de fraude 


]


.pull-right[

**Taxa de acertos:**

- entre 75% e 85%


**Fase final de implementa√ß√£o**

**Expans√£o para os demais programas**

]



---

class: center, middle
# <font color =#F8A53A>Estimativa da quantidade de livros a serem comprados no PNLD</font>


---

# <font color =#76DFEC>Programa Nacional do Livro Did√°tico - PNLD</font>
### **S√©ries temporais para estimar o n√∫mero de alunos para cada s√©rie em todas as escolas do Brasil**  

<code> 
### **Contextualiza√ß√£o:**

.pull-left[
- Todo ano o FNDE realiza a compra centralizada e distribui√ß√£o dos livros did√°ticos de todas as escolas p√∫blicas do pa√≠s

- s√£o 5.570 munic√≠pios, 27 estados

**padroniza√ß√£o √© "proibida"**

- as escolas tem liberdade para escolherem seu material did√°tico

]

.pull-right[
**controle √© quase zero**

- as escolas n√£o tem obriga√ß√£o de informar n√∫mero de alunos

**como era a feita a estimativa anteriormente:**
</code>

- $Q_{2020} = Q_{2019} + x$, $x = üßô$

]


---


### **Contextualiza√ß√£o:**
<code> 

**N√∫meros:**  

```{r, results = "asis", echo = FALSE, message=FALSE, warning=FALSE}

library(rvest)

url = "https://www.fnde.gov.br/index.php/programas/programas-do-livro/pnld/dados-estatisticos"

pnld <- url %>%
  read_html() %>%
  html_nodes(xpath='/html/body/div[2]/main/div/div[3]/div/section/article/div[1]/div[1]/table[1]') %>%
  html_table() %>%
  as.data.frame()

colnames(pnld) = pnld[1,]
pnld = pnld[-1, ]

rownames(pnld) = NULL  

#library(kableExtra)

pnld %>% 
  knitr::kable('html') %>%
  kableExtra::kable_styling(bootstrap_options = "basic")
```

</code>


---

<code> 
## **Resultados Estimativa PNLD**

</br>

</br>
### **Somente saberemos ano que vem**

- mas j√° temos uma metodologia cient√≠fica de estimativa


- dados minimamente confi√°veis - censo escolar


- possibilidade inclusive de estimar o erro


---


class: inverse, center, middle


## <code><font color =#F8A53A>Outras </font><font color =#76DFEC>iniciativas </font><font color =#C2DB70> e projetos</font></code>


---



class: inverse, center, middle


## <code><font color =#F35A94>Desafios </font></code>


---

class: title-slide-final, middle
background-image: url()
background-size: 100px
background-position: 9% 15%

# Obrigado!!

</br>
</br>

## <code><font color =#F8A53A>Duvidas </font><font color =#76DFEC>ou </font><font color =#C2DB70>Perguntas?</font></code>



### .white[Contato:]

<p>
<a href="mailto:allan.quadros@fnde.gov.br"><i class="fa fa-paper-plane fa-fw"></i> allan.quadros@fnde.gov.br</a>
</p>


<!-- como colocar figuras ao lado de palavras varias vezes em html -->
<div>
    <p>Feito no
    <img src="./img/rball.png" style="float: center; width: 4%;"> com 
    <img src="./img/xaringan.png" style="float: center; width: 3.8%;"> e
    <img src="./img/plotlylogo.png" style="float: center; width: 4%;"> .
    </p>
</div>

Apresenta√ß√£o dispon√≠vel no <img src="./img/gitlogo1.png" style="float: center; width: 8%;">em:

<p>
<a href="https://allanvc.github.io/slide_WIDaT2019/" style="color:navyblue">https://allanvc.github.io/slide_WIDaT2019/</a>
</p>

<br>
